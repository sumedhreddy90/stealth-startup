{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/sumedhreddy/Documents/stealth/stealth-startup/src/screens/NewsDetailScreen.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useContext, useState, useMemo, useRef, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Share from \"react-native-web/dist/exports/Share\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Text, Divider, NewsImageTagView, Box, Icon, HtmlView, SectionHeader, Separator, NewsCommentItemView, NewsListItemSquareView } from \"../components\";\nimport { useRoute, useNavigation, useFocusEffect } from \"@react-navigation/native\";\nimport { HeaderButton, HeaderButtons, Item } from \"react-navigation-header-buttons\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useTheme } from \"../theme\";\nimport moment from \"moment\";\nimport { useLocalization } from \"../localization\";\nimport NavigationNames from \"../navigations/NavigationNames\";\nimport { FavoritedNewsContext, AuthenticationContext } from \"../context\";\nimport { getImageUrl } from \"../helpers\";\nimport { NewsService } from \"../services\";\nvar WIDTH = Dimensions.get(\"window\").width;\n\nvar IoniconsHeaderButton = function IoniconsHeaderButton(props) {\n  return React.createElement(HeaderButton, _extends({}, props, {\n    IconComponent: Ionicons,\n    iconSize: 24,\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 3\n    }\n  }));\n};\n\nvar EmptyCommentsView = function EmptyCommentsView(_ref) {\n  var newsId = _ref.newsId;\n  var authContext = useContext(AuthenticationContext);\n\n  var _useTheme = useTheme(),\n      colors = _useTheme.colors;\n\n  var _useLocalization = useLocalization(),\n      getString = _useLocalization.getString;\n\n  var navigation = useNavigation();\n  return React.createElement(View, {\n    style: styles.emptyCommentsViewContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, React.createElement(Icon, {\n    group: \"FontAwesome5\",\n    name: \"comment-alt\",\n    color: colors.gray,\n    size: 18,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: [styles.emptyCommentsViewText, {\n      color: colors.gray\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, getString(\"no_comments_yet\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      if (authContext.isLoggedIn) {\n        navigation.navigate(NavigationNames.WriteCommentScreen, {\n          newsId: newsId\n        });\n      } else {\n        navigation.navigate(NavigationNames.RootLoginScreen);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, React.createElement(Box, {\n    style: {\n      paddingVertical: 4,\n      paddingHorizontal: 12\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, getString(\"write_comment\")))));\n};\n\nexport var NewsDetailScreen = function NewsDetailScreen() {\n  var _model$topComments;\n\n  var navigation = useNavigation();\n\n  var _useContext = useContext(AuthenticationContext),\n      isLoggedIn = _useContext.isLoggedIn;\n\n  var _useRoute = useRoute(),\n      params = _useRoute.params;\n\n  var _useTheme2 = useTheme(),\n      colors = _useTheme2.colors;\n\n  var _useLocalization2 = useLocalization(),\n      getString = _useLocalization2.getString;\n\n  var _useState = useState(params[\"model\"]),\n      _useState2 = _slicedToArray(_useState, 2),\n      model = _useState2[0],\n      setModel = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      otherNews = _useState4[0],\n      setOtherNews = _useState4[1];\n\n  var refOtherNewsCount = useRef(0);\n\n  var _useContext2 = useContext(FavoritedNewsContext),\n      favoriteNews = _useContext2.favoriteNews,\n      favoritedNews = _useContext2.favoritedNews;\n\n  var isFavorited = favoritedNews.hasOwnProperty(model.id);\n  var animation = useMemo(function () {\n    return new Animated.Value(0);\n  }, []);\n  var opacity = animation.interpolate({\n    inputRange: [0, 1, 200],\n    outputRange: [0, 0, 1],\n    extrapolate: \"clamp\"\n  });\n  var opacityReverse = animation.interpolate({\n    inputRange: [1, 1, 100],\n    outputRange: [1, 1, 0],\n    extrapolate: \"clamp\"\n  });\n  useEffect(function () {\n    navigation.setOptions({\n      title: model.title,\n      headerTransparent: true,\n      headerTintColor: \"white\",\n      headerTitleStyle: {\n        opacity: opacity\n      },\n      headerBackground: function headerBackground() {\n        return React.createElement(Animated.View, {\n          style: [StyleSheet.absoluteFill, styles.headerView, {\n            backgroundColor: model.category.color,\n            opacity: opacity\n          }],\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 9\n          }\n        });\n      },\n      headerRight: function headerRight() {\n        return React.createElement(HeaderButtons, {\n          HeaderButtonComponent: IoniconsHeaderButton,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 9\n          }\n        }, React.createElement(Item, {\n          title: \"\",\n          iconName: \"md-share\",\n          onPress: function onPress() {\n            return Share.share({\n              title: model.title,\n              message: model.content\n            });\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 11\n          }\n        }));\n      }\n    });\n  }, [opacity]);\n  useFocusEffect(React.useCallback(function () {\n    NewsService.get(model.id).then(function (res) {\n      setModel(res.data.news);\n\n      if (refOtherNewsCount.current === 0) {\n        setOtherNews(res.data.otherNews);\n        refOtherNewsCount.current = res.data.otherNews.length;\n      }\n    });\n  }, [model.id]));\n\n  var onClickFavorite = function onClickFavorite() {\n    if (!isLoggedIn) {\n      navigation.navigate(NavigationNames.RootLoginScreen);\n      return;\n    }\n\n    NewsService.favoriteNews(model.id, !isFavorited).then(function (_) {\n      favoriteNews(model, !isFavorited);\n    }).catch(function (err) {\n      return alert(err.message);\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(ScrollView, {\n    style: styles.container,\n    scrollEventThrottle: 16,\n    onScroll: Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          y: animation\n        }\n      }\n    }], {\n      useNativeDriver: false\n    }),\n    showsVerticalScrollIndicator: false,\n    contentContainerStyle: styles.scrollViewContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    source: {\n      uri: getImageUrl(model.imageName)\n    },\n    style: styles.previewImage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }), React.createElement(NewsImageTagView, {\n    title: model.category.name,\n    color: model.category.color,\n    style: styles.newsTagView,\n    titleStyle: styles.newsTagTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.bookmarkButtonContainer,\n    onPress: onClickFavorite,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, React.createElement(Box, {\n    style: styles.bookmarkButtonBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, React.createElement(Icon, {\n    group: \"MaterialIcons\",\n    name: isFavorited ? \"bookmark\" : \"bookmark-border\",\n    color: model.category.color,\n    size: 21,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  })))), React.createElement(View, {\n    style: styles.newsContentContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.newsTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, model.title), React.createElement(View, {\n    style: {\n      marginTop: 8\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, React.createElement(HtmlView, {\n    htmlContent: model.content,\n    imagesMaxWidthOffset: WIDTH - 32,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }))), React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: {\n      paddingVertical: 16\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, React.createElement(SectionHeader, {\n    title: getString(\"comments\"),\n    endTitle: getString(\"more\"),\n    endAction: function endAction() {\n      navigation.navigate(NavigationNames.NewsCommentsScreen, {\n        newsId: model.id\n      });\n    },\n    titleStyle: {\n      fontSize: 18\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }), model.commentsCount === 0 || ((_model$topComments = model.topComments) == null ? void 0 : _model$topComments.length) === 0 ? React.createElement(EmptyCommentsView, {\n    newsId: model.id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }) : React.createElement(FlatList, {\n    data: model.topComments,\n    keyExtractor: function keyExtractor(_, index) {\n      return \"keyNewsItem\" + index;\n    },\n    ItemSeparatorComponent: function ItemSeparatorComponent() {\n      return React.createElement(Divider, {\n        mh16: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 47\n        }\n      });\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(NewsCommentItemView, {\n        item: item,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 43\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 15\n    }\n  })), React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: {\n      paddingVertical: 16\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, React.createElement(SectionHeader, {\n    title: getString(\"other_news\"),\n    titleStyle: {\n      fontSize: 18\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  }), React.createElement(FlatList, {\n    data: otherNews,\n    horizontal: true,\n    ItemSeparatorComponent: function ItemSeparatorComponent() {\n      return React.createElement(Separator, {\n        horizontal: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 43\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(_, index) {\n      return \"otherNewsItemKey\" + index;\n    },\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          navigation.push(NavigationNames.NewsDetailScreen, {\n            model: _objectSpread({}, item)\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 15\n        }\n      }, React.createElement(NewsListItemSquareView, {\n        item: item,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 17\n        }\n      }));\n    },\n    contentContainerStyle: {\n      paddingHorizontal: 16\n    },\n    showsHorizontalScrollIndicator: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 11\n    }\n  }))), React.createElement(Animated.View, {\n    pointerEvents: \"none\",\n    style: [styles.bottomInfoContainer, {\n      backgroundColor: colors.windowBackground,\n      opacity: opacityReverse\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }\n  }, React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: styles.itemDescInfoView,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, React.createElement(Icon, {\n    name: \"md-time\",\n    color: colors.gray,\n    size: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    style: [{\n      color: colors.gray,\n      marginEnd: 12\n    }, styles.itemDescInfoDate],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 11\n    }\n  }, moment(model.createdAt).fromNow()), React.createElement(Icon, {\n    group: \"FontAwesome5\",\n    name: \"comment-alt\",\n    color: colors.gray,\n    size: 13,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    style: [{\n      color: colors.gray\n    }, styles.itemDescInfoDate],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 11\n    }\n  }, getString(\"comments_with_count\", {\n    count: model.commentsCount\n  })))));\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  scrollViewContainer: {\n    paddingBottom: 42\n  },\n  headerView: {\n    backgroundColor: \"white\"\n  },\n  headerDivider: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    opacity: 0.5\n  },\n  itemDescInfoView: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#00000005\",\n    paddingHorizontal: 16,\n    paddingVertical: 8\n  },\n  itemDescInfoDate: {\n    fontSize: 13,\n    fontFamily: \"default-bold\",\n    marginStart: 6\n  },\n  previewImage: {\n    aspectRatio: 1\n  },\n  newsTagView: {\n    bottom: -13,\n    top: undefined,\n    start: 16\n  },\n  newsTagTitle: {\n    fontSize: 13\n  },\n  bookmarkButtonContainer: {\n    position: \"absolute\",\n    end: 16,\n    bottom: -17,\n    flexDirection: \"row\"\n  },\n  bookmarkButtonBox: {\n    width: 36,\n    borderRadius: 100,\n    aspectRatio: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  newsContentContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 16\n  },\n  newsTitle: {\n    fontFamily: \"default-medium\",\n    marginTop: 14,\n    fontSize: 22\n  },\n  bottomInfoContainer: {\n    position: \"absolute\",\n    bottom: 0,\n    start: 0,\n    end: 0\n  },\n  emptyCommentsViewContainer: {\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    paddingBottom: 12,\n    alignItems: \"center\",\n    flexDirection: \"row\"\n  },\n  emptyCommentsViewText: {\n    flex: 1,\n    marginStart: 8,\n    fontFamily: \"default-medium\",\n    fontSize: 15\n  }\n});","map":{"version":3,"sources":["/Users/sumedhreddy/Documents/stealth/stealth-startup/src/screens/NewsDetailScreen.tsx"],"names":["React","useContext","useState","useMemo","useRef","useEffect","Text","Divider","NewsImageTagView","Box","Icon","HtmlView","SectionHeader","Separator","NewsCommentItemView","NewsListItemSquareView","useRoute","useNavigation","useFocusEffect","HeaderButton","HeaderButtons","Item","Ionicons","useTheme","moment","useLocalization","NavigationNames","FavoritedNewsContext","AuthenticationContext","getImageUrl","NewsService","WIDTH","Dimensions","get","width","IoniconsHeaderButton","props","EmptyCommentsView","newsId","authContext","colors","getString","navigation","styles","emptyCommentsViewContainer","gray","emptyCommentsViewText","color","isLoggedIn","navigate","WriteCommentScreen","RootLoginScreen","paddingVertical","paddingHorizontal","NewsDetailScreen","params","model","setModel","otherNews","setOtherNews","refOtherNewsCount","favoriteNews","favoritedNews","isFavorited","hasOwnProperty","id","animation","Animated","Value","opacity","interpolate","inputRange","outputRange","extrapolate","opacityReverse","setOptions","title","headerTransparent","headerTintColor","headerTitleStyle","headerBackground","StyleSheet","absoluteFill","headerView","backgroundColor","category","headerRight","Share","share","message","content","useCallback","then","res","data","news","current","length","onClickFavorite","_","catch","err","alert","container","event","nativeEvent","contentOffset","y","useNativeDriver","scrollViewContainer","uri","imageName","previewImage","name","newsTagView","newsTagTitle","bookmarkButtonContainer","bookmarkButtonBox","newsContentContainer","newsTitle","marginTop","NewsCommentsScreen","fontSize","commentsCount","topComments","index","item","push","bottomInfoContainer","windowBackground","itemDescInfoView","marginEnd","itemDescInfoDate","createdAt","fromNow","count","create","flex","paddingBottom","headerDivider","position","bottom","left","right","flexDirection","alignItems","fontFamily","marginStart","aspectRatio","top","undefined","start","end","borderRadius","justifyContent","paddingTop"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useMemo, useRef, useEffect } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Animated,\n  Share,\n  ScrollView,\n  Image,\n  TouchableOpacity,\n  Dimensions,\n  FlatList,\n} from \"react-native\";\nimport {\n  Text,\n  Divider,\n  NewsImageTagView,\n  Box,\n  Icon,\n  HtmlView,\n  SectionHeader,\n  Separator,\n  NewsCommentItemView,\n  NewsListItemSquareView,\n} from \"../components\";\nimport {\n  useRoute,\n  useNavigation,\n  useFocusEffect,\n} from \"@react-navigation/native\";\nimport { NewsModel, NewsCommentModel } from \"../models\";\nimport {\n  HeaderButton,\n  HeaderButtons,\n  Item,\n} from \"react-navigation-header-buttons\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useTheme } from \"../theme\";\nimport moment from \"moment\";\nimport { useLocalization } from \"../localization\";\nimport NavigationNames from \"../navigations/NavigationNames\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { FavoritedNewsContext, AuthenticationContext } from \"../context\";\nimport { getImageUrl } from \"../helpers\";\nimport { NewsService } from \"../services\";\n\nconst WIDTH = Dimensions.get(\"window\").width;\n\nconst IoniconsHeaderButton = (props: any) => (\n  <HeaderButton\n    {...props}\n    IconComponent={Ionicons}\n    iconSize={24}\n    color={\"white\"}\n  />\n);\n\nconst EmptyCommentsView: React.FC<{ newsId: number }> = ({ newsId }) => {\n  const authContext = useContext(AuthenticationContext);\n  const { colors } = useTheme();\n  const { getString } = useLocalization();\n  const navigation = useNavigation();\n\n  return (\n    <View style={styles.emptyCommentsViewContainer}>\n      <Icon\n        group=\"FontAwesome5\"\n        name=\"comment-alt\"\n        color={colors.gray}\n        size={18}\n      />\n      <Text style={[styles.emptyCommentsViewText, { color: colors.gray }]}>\n        {getString(\"no_comments_yet\")}\n      </Text>\n      <TouchableOpacity\n        onPress={() => {\n          if (authContext.isLoggedIn) {\n            navigation.navigate(NavigationNames.WriteCommentScreen, {\n              newsId: newsId,\n            });\n          } else {\n            navigation.navigate(NavigationNames.RootLoginScreen);\n          }\n        }}\n      >\n        <Box style={{ paddingVertical: 4, paddingHorizontal: 12 }}>\n          <Text>{getString(\"write_comment\")}</Text>\n        </Box>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nexport const NewsDetailScreen = () => {\n  const navigation = useNavigation<StackNavigationProp<any>>();\n  const { isLoggedIn } = useContext(AuthenticationContext);\n\n  const { params } = useRoute();\n  const { colors } = useTheme();\n  const { getString } = useLocalization();\n\n  const [model, setModel] = useState<NewsModel>(\n    (params as any)[\"model\"] as NewsModel\n  );\n  const [otherNews, setOtherNews] = useState<NewsModel[]>([]);\n  const refOtherNewsCount = useRef(0);\n\n  const { favoriteNews, favoritedNews } = useContext(FavoritedNewsContext);\n  const isFavorited = favoritedNews.hasOwnProperty(model.id);\n\n  const animation = useMemo(() => new Animated.Value(0), []);\n\n  const opacity = animation.interpolate({\n    inputRange: [0, 1, 200],\n    outputRange: [0, 0, 1],\n    extrapolate: \"clamp\",\n  });\n\n  const opacityReverse = animation.interpolate({\n    inputRange: [1, 1, 100],\n    outputRange: [1, 1, 0],\n    extrapolate: \"clamp\",\n  });\n\n  useEffect(() => {\n    navigation.setOptions({\n      title: model.title,\n      headerTransparent: true,\n      headerTintColor: \"white\",\n      headerTitleStyle: { opacity },\n      headerBackground: () => (\n        <Animated.View\n          style={[\n            StyleSheet.absoluteFill,\n            styles.headerView,\n            { backgroundColor: model.category.color, opacity },\n          ]}\n        ></Animated.View>\n      ),\n      headerRight: () => (\n        <HeaderButtons HeaderButtonComponent={IoniconsHeaderButton}>\n          <Item\n            title=\"\"\n            iconName=\"md-share\"\n            onPress={() =>\n              Share.share({\n                title: model.title,\n                message: model.content,\n              })\n            }\n          />\n        </HeaderButtons>\n      ),\n    });\n  }, [opacity])\n\n  useFocusEffect(\n    React.useCallback(() => {\n      NewsService.get(model.id).then((res) => {\n        setModel(res.data.news);\n        if (refOtherNewsCount.current === 0) {\n          setOtherNews(res.data.otherNews);\n          refOtherNewsCount.current = res.data.otherNews.length;\n        }\n      });\n    }, [model.id])\n  );\n\n  const onClickFavorite = () => {\n    if (!isLoggedIn) {\n      navigation.navigate(NavigationNames.RootLoginScreen);\n      return;\n    }\n    NewsService.favoriteNews(model.id, !isFavorited)\n      .then((_) => {\n        favoriteNews(model, !isFavorited);\n      })\n      .catch((err) => alert(err.message));\n  };\n\n  return (\n    <>\n      <ScrollView\n        style={styles.container}\n        scrollEventThrottle={16}\n        onScroll={Animated.event([\n          { nativeEvent: { contentOffset: { y: animation } } },\n        ], { useNativeDriver: false })}\n        showsVerticalScrollIndicator={false}\n        contentContainerStyle={styles.scrollViewContainer}\n      >\n        {/* Header Start */}\n        <View>\n          <Image\n            source={{ uri: getImageUrl(model.imageName) }}\n            style={styles.previewImage}\n          />\n          <NewsImageTagView\n            title={model.category.name}\n            color={model.category.color}\n            style={styles.newsTagView}\n            titleStyle={styles.newsTagTitle}\n          />\n          <TouchableOpacity\n            style={styles.bookmarkButtonContainer}\n            onPress={onClickFavorite}\n          >\n            <Box style={styles.bookmarkButtonBox}>\n              <Icon\n                group=\"MaterialIcons\"\n                name={isFavorited ? \"bookmark\" : \"bookmark-border\"}\n                color={model.category.color}\n                size={21}\n              />\n            </Box>\n          </TouchableOpacity>\n        </View>\n        {/* Header End */}\n\n        {/* Desc Start */}\n        <View style={styles.newsContentContainer}>\n          <Text style={styles.newsTitle}>{model.title}</Text>\n          <View style={{ marginTop: 8 }}>\n            <HtmlView\n              htmlContent={model.content}\n              imagesMaxWidthOffset={WIDTH - 32}\n            />\n          </View>\n        </View>\n        {/* Desc End */}\n        <Divider />\n        {/* Comments Start */}\n        <View style={{ paddingVertical: 16 }}>\n          <SectionHeader\n            title={getString(\"comments\")}\n            endTitle={getString(\"more\")}\n            endAction={() => {\n              navigation.navigate(NavigationNames.NewsCommentsScreen, {\n                newsId: model.id,\n              });\n            }}\n            titleStyle={{ fontSize: 18 }}\n          />\n          {model.commentsCount === 0 || model.topComments?.length === 0 ? (\n            <EmptyCommentsView newsId={model.id} />\n          ) : (\n              <FlatList<NewsCommentModel>\n                data={model.topComments}\n                keyExtractor={(_, index) => `keyNewsItem${index}`}\n                ItemSeparatorComponent={() => <Divider mh16 />}\n                renderItem={({ item }) => <NewsCommentItemView item={item} />}\n              />\n            )}\n        </View>\n        {/* Comments End */}\n        <Divider />\n        {/* Other News Start */}\n        <View style={{ paddingVertical: 16 }}>\n          <SectionHeader\n            title={getString(\"other_news\")}\n            titleStyle={{ fontSize: 18 }}\n          />\n          <FlatList\n            data={otherNews}\n            horizontal\n            ItemSeparatorComponent={() => <Separator horizontal />}\n            keyExtractor={(_, index) => `otherNewsItemKey${index}`}\n            renderItem={({ item }) => (\n              <TouchableOpacity\n                onPress={() => {\n                  navigation.push(NavigationNames.NewsDetailScreen, {\n                    model: { ...item },\n                  });\n                }}\n              >\n                <NewsListItemSquareView item={item} />\n              </TouchableOpacity>\n            )}\n            contentContainerStyle={{\n              paddingHorizontal: 16,\n            }}\n            showsHorizontalScrollIndicator={false}\n          />\n        </View>\n        {/* Other News End */}\n      </ScrollView>\n\n      {/* InfoBar Start */}\n      <Animated.View\n        pointerEvents={\"none\"}\n        style={[\n          styles.bottomInfoContainer,\n          {\n            backgroundColor: colors.windowBackground,\n            opacity: opacityReverse,\n          },\n        ]}\n      >\n        <Divider />\n        <View style={styles.itemDescInfoView}>\n          <Icon name=\"md-time\" color={colors.gray} size={16} />\n          <Text\n            style={[\n              { color: colors.gray, marginEnd: 12 },\n              styles.itemDescInfoDate,\n            ]}\n          >\n            {moment(model.createdAt).fromNow()}\n          </Text>\n          <Icon\n            group=\"FontAwesome5\"\n            name=\"comment-alt\"\n            color={colors.gray}\n            size={13}\n          />\n          <Text style={[{ color: colors.gray }, styles.itemDescInfoDate]}>\n            {getString(\"comments_with_count\", {\n              count: model.commentsCount,\n            })}\n          </Text>\n        </View>\n      </Animated.View>\n      {/* InfoBar End */}\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: { flex: 1 },\n  scrollViewContainer: { paddingBottom: 42 },\n  headerView: { backgroundColor: \"white\" },\n  headerDivider: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    opacity: 0.5,\n  },\n  itemDescInfoView: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"#00000005\",\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n  },\n  itemDescInfoDate: {\n    fontSize: 13,\n    fontFamily: \"default-bold\",\n    marginStart: 6,\n  },\n  previewImage: {\n    aspectRatio: 1,\n  },\n  newsTagView: { bottom: -13, top: undefined, start: 16 },\n  newsTagTitle: { fontSize: 13 },\n  bookmarkButtonContainer: {\n    position: \"absolute\",\n    end: 16,\n    bottom: -17,\n    flexDirection: \"row\",\n  },\n  bookmarkButtonBox: {\n    width: 36,\n    borderRadius: 100,\n    aspectRatio: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  newsContentContainer: { paddingHorizontal: 16, paddingVertical: 16 },\n  newsTitle: {\n    fontFamily: \"default-medium\",\n    marginTop: 14,\n    fontSize: 22,\n  },\n  bottomInfoContainer: {\n    position: \"absolute\",\n    bottom: 0,\n    start: 0,\n    end: 0,\n  },\n  emptyCommentsViewContainer: {\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    paddingBottom: 12,\n    alignItems: \"center\",\n    flexDirection: \"row\",\n  },\n  emptyCommentsViewText: {\n    flex: 1,\n    marginStart: 8,\n    fontFamily: \"default-medium\",\n    fontSize: 15,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}