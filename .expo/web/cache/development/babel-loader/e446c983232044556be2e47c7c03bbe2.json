{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"axios\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\n\nvar getUserInfo = function getUserInfo() {\n  var result;\n  return _regeneratorRuntime.async(function getUserInfo$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(axios.get(\"profile/userinfo\"));\n\n        case 3:\n          result = _context.sent;\n\n          if (!(result.data.user === null)) {\n            _context.next = 6;\n            break;\n          }\n\n          return _context.abrupt(\"return\", Promise.reject(new Error(\"user is null\")));\n\n        case 6:\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"User\", JSON.stringify(result.data.user)));\n\n        case 8:\n          return _context.abrupt(\"return\", Promise.resolve(result.data.user));\n\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 11]], Promise);\n};\n\nvar updateProfileImage = function updateProfileImage(fileUri) {\n  var _result$data, image, data, result;\n\n  return _regeneratorRuntime.async(function updateProfileImage$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          image = {\n            uri: fileUri,\n            type: \"image/jpg\",\n            name: \"upload.jpg\"\n          };\n          data = new FormData();\n          data.append(\"image\", image);\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(axios.post(\"profile/updateprofileimage\", data, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          }));\n\n        case 6:\n          result = _context2.sent;\n\n          if (!(result != null && (_result$data = result.data) != null && _result$data.error)) {\n            _context2.next = 9;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", Promise.reject(Error(result.data.error.message)));\n\n        case 9:\n          return _context2.abrupt(\"return\", Promise.resolve(result.data));\n\n        case 12:\n          _context2.prev = 12;\n          _context2.t0 = _context2[\"catch\"](0);\n          return _context2.abrupt(\"return\", Promise.reject(_context2.t0));\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 12]], Promise);\n};\n\nexport default {\n  getUserInfo: getUserInfo,\n  updateProfileImage: updateProfileImage\n};","map":{"version":3,"sources":["/Users/sumedhreddy/Documents/stealth/stealth-startup/src/services/ProfileService.ts"],"names":["axios","AsyncStorage","getUserInfo","get","result","data","user","Promise","reject","Error","setItem","JSON","stringify","resolve","updateProfileImage","fileUri","image","uri","type","name","FormData","append","post","headers","error","message"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;SACSC,Y;;AAIT,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEKF,KAAK,CAACG,GAAN,CAAU,kBAAV,CAFL;;AAAA;AAEVC,UAAAA,MAFU;;AAAA,gBAIZA,MAAM,CAACC,IAAP,CAAYC,IAAZ,KAAqB,IAJT;AAAA;AAAA;AAAA;;AAAA,2CAKPC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,cAAV,CAAf,CALO;;AAAA;AAAA;AAAA,2CAOVR,YAAY,CAACS,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeR,MAAM,CAACC,IAAP,CAAYC,IAA3B,CAA7B,CAPU;;AAAA;AAAA,2CASTC,OAAO,CAACM,OAAR,CAAgBT,MAAM,CAACC,IAAP,CAAYC,IAA5B,CATS;;AAAA;AAAA;AAAA;AAAA,2CAWTC,OAAO,CAACC,MAAR,aAXS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAApB;;AAeA,IAAMM,kBAAkB,GAAG,SAArBA,kBAAqB,CAAOC,OAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjBC,UAAAA,KAFiB,GAEJ;AACjBC,YAAAA,GAAG,EAAEF,OADY;AAEjBG,YAAAA,IAAI,EAAE,WAFW;AAGjBC,YAAAA,IAAI,EAAE;AAHW,WAFI;AAQnBd,UAAAA,IARmB,GAQZ,IAAIe,QAAJ,EARY;AASvBf,UAAAA,IAAI,CAACgB,MAAL,CAAY,OAAZ,EAAqBL,KAArB;AATuB;AAAA,2CAUFhB,KAAK,CAACsB,IAAN,CAAW,4BAAX,EAAyCjB,IAAzC,EAA+C;AAClEkB,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT;AADyD,WAA/C,CAVE;;AAAA;AAUjBnB,UAAAA,MAViB;;AAAA,gBAenBA,MAfmB,4BAenBA,MAAM,CAAEC,IAfW,aAenB,aAAcmB,KAfK;AAAA;AAAA;AAAA;;AAAA,4CAgBdjB,OAAO,CAACC,MAAR,CAAeC,KAAK,CAACL,MAAM,CAACC,IAAP,CAAYmB,KAAZ,CAAkBC,OAAnB,CAApB,CAhBc;;AAAA;AAAA,4CAkBhBlB,OAAO,CAACM,OAAR,CAAgBT,MAAM,CAACC,IAAvB,CAlBgB;;AAAA;AAAA;AAAA;AAAA,4CAoBhBE,OAAO,CAACC,MAAR,cApBgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AAwBA,eAAe;AACbN,EAAAA,WAAW,EAAXA,WADa;AAEbY,EAAAA,kBAAkB,EAAlBA;AAFa,CAAf","sourcesContent":["import axios from \"axios\";\nimport { AsyncStorage } from \"react-native\";\n\nimport { UserModel } from \"../models\";\n\nconst getUserInfo = async (): Promise<UserModel> => {\n  try {\n    const result = await axios.get(\"profile/userinfo\");\n\n    if (result.data.user === null) {\n      return Promise.reject(new Error(\"user is null\"));\n    }\n    await AsyncStorage.setItem(\"User\", JSON.stringify(result.data.user));\n\n    return Promise.resolve(result.data.user);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n\nconst updateProfileImage = async (fileUri: string): Promise<string> => {\n  try {\n    const image: any = {\n      uri: fileUri,\n      type: \"image/jpg\",\n      name: \"upload.jpg\",\n    };\n\n    var data = new FormData();\n    data.append(\"image\", image);\n    const result = await axios.post(\"profile/updateprofileimage\", data, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n    if (result?.data?.error) {\n      return Promise.reject(Error(result.data.error.message));\n    }\n    return Promise.resolve(result.data);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\n\nexport default {\n  getUserInfo,\n  updateProfileImage,\n};\n"]},"metadata":{},"sourceType":"module"}